{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\Admin\\\\Desktop\\\\1653020_10\\\\Source\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{ListItem}from'@material-ui/core';import{Map,TileLayer,Marker,Popup}from'react-leaflet';import{startOfToday}from\"date-fns\";import Seekbar from\"./Seekbar\";function CovidMap(_ref){var onPatientMarkerClicked=_ref.onPatientMarkerClicked,handleclickList=_ref.handleclickList;var today=startOfToday();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),patients=_useState2[0],setPatients=_useState2[1];var _useState3=useState([15.762887,106.6800684]),_useState4=_slicedToArray(_useState3,2),positionP=_useState4[0],setPositionP=_useState4[1];var _React$useState=React.useState(1),_React$useState2=_slicedToArray(_React$useState,2),selectedIndex=_React$useState2[0],setSelectedIndex=_React$useState2[1];var _useState5=useState(5),_useState6=_slicedToArray(_useState5,2),zoomDefault=_useState6[0],setZoomDefault=_useState6[1];var _useState7=useState(today),_useState8=_slicedToArray(_useState7,2),datevalue=_useState8[0],setDatevalue=_useState8[1];var handleclickMoveMap=function handleclickMoveMap(a){setPositionP([a.lat,a.lng]);setZoomDefault(20);};var handleListItemClick=function handleListItemClick(event,index,i){setSelectedIndex(index);};function compare(a,b){var comparison=0;if(a.verifyDate>b.verifyDate){comparison=-1;}else if(a.verifyDate<b.verifyDate){comparison=1;}return comparison;}var handleTransdatevalue=function handleTransdatevalue(datevalueS){setDatevalue(datevalueS);setZoomDefault(5);};var handleTransPosotion=function handleTransPosotion(_ref2){var _ref3=_slicedToArray(_ref2,2),PositionValuelat=_ref3[0],PositionValuelng=_ref3[1];setPositionP([PositionValuelat,PositionValuelng]);};var handleTranszoomDefault=function handleTranszoomDefault(ZoomValue){setZoomDefault(ZoomValue);};useEffect(function(){fetch(\"https://maps.vnpost.vn/apps/covid19/api/patientapi/list\").then(function(res){return res.json();}).then(function(result){setPatients(result.data);},// Note: it's important to handle errors here\n// instead of a catch() block so that we don't swallow\n// exceptions from actual bugs in components.\nfunction(error){// setIsLoaded(true);\n// setError(error);\n});},[]);var listItems=[].concat(patients).sort(compare).map(function(d,i){if(Date.parse(d.verifyDate)<=Date.parse(datevalue))return/*#__PURE__*/React.createElement(ListItem,{selected:selectedIndex===d.name+d.address,button:true,onClick:function onClick(event){handleclickList(d);handleclickMoveMap(d);handleListItemClick(event,d.name+d.address);}},\" \",/*#__PURE__*/React.createElement(\"li\",null,d.name,\" - \",d.address));});return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Map,{center:positionP,zoom:zoomDefault},/*#__PURE__*/React.createElement(TileLayer,{attribution:\"&copy <a href=\\\"http://osm.org/copyright\\\">OpenStreetMap</a> contributors\",url:\"https://{s}.tile.osm.org/{z}/{x}/{y}.png   \"}),patients.sort(compare).map(function(patient,i){if(Date.parse(patient.verifyDate)<=Date.parse(datevalue))return/*#__PURE__*/React.createElement(Marker,{position:[patient.lat,patient.lng],onClick:function onClick(event){handleclickList(patient);handleListItemClick(event,patient.name+patient.address,i);}},/*#__PURE__*/React.createElement(Popup,null,/*#__PURE__*/React.createElement(\"ul\",null,/*#__PURE__*/React.createElement(\"li\",null,\"Name: \",patient.name),/*#__PURE__*/React.createElement(\"li\",null,\"Address: \",patient.address),/*#__PURE__*/React.createElement(\"li\",null,\"Note: \",patient.note),/*#__PURE__*/React.createElement(\"li\",null,\"Verify date: \",patient.verifyDate))));})),/*#__PURE__*/React.createElement(\"div\",{id:\"list\"},/*#__PURE__*/React.createElement(Seekbar,{handleTransdatevalue:handleTransdatevalue,handleTransPosotion:handleTransPosotion,handleTranszoomDefault:handleTranszoomDefault}),/*#__PURE__*/React.createElement(\"br\",null),\"Danh s\\xE1ch ng\\u01B0\\u1EDDi nhi\\u1EC5m nCovid - 19:\",/*#__PURE__*/React.createElement(\"ul\",null,listItems)));};export default CovidMap;","map":{"version":3,"sources":["C:/Users/Admin/Desktop/1653020_10/Source/src/components/CovidMap.js"],"names":["React","useEffect","useState","ListItem","Map","TileLayer","Marker","Popup","startOfToday","Seekbar","CovidMap","onPatientMarkerClicked","handleclickList","today","patients","setPatients","positionP","setPositionP","selectedIndex","setSelectedIndex","zoomDefault","setZoomDefault","datevalue","setDatevalue","handleclickMoveMap","a","lat","lng","handleListItemClick","event","index","i","compare","b","comparison","verifyDate","handleTransdatevalue","datevalueS","handleTransPosotion","PositionValuelat","PositionValuelng","handleTranszoomDefault","ZoomValue","fetch","then","res","json","result","data","error","listItems","concat","sort","map","d","Date","parse","name","address","patient","note"],"mappings":"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","sourcesContent":["import React, {useEffect, useState } from 'react';\nimport { ListItem } from '@material-ui/core';\nimport { Map, TileLayer, Marker, Popup } from 'react-leaflet';\nimport { startOfToday} from \"date-fns\";\nimport Seekbar from \"./Seekbar\"\n\nfunction CovidMap  ({onPatientMarkerClicked,handleclickList}){\n    const today = startOfToday();\n    const [patients, setPatients] = useState([]);\n    const [positionP, setPositionP] = useState([15.762887, 106.6800684]);\n    const [selectedIndex, setSelectedIndex] = React.useState(1);\n    const [zoomDefault,setZoomDefault] = useState(5);\n    const [datevalue, setDatevalue] = useState(today);\n\n\n    const handleclickMoveMap = (a) => {\n        setPositionP ([a.lat, a.lng])\n        setZoomDefault (20)\n    };\n\n    const handleListItemClick = (event, index, i) => {\n        setSelectedIndex(index);\n    };\n\n    function compare(a, b) {\n        let comparison = 0;\n        if (a.verifyDate > b.verifyDate) {\n            comparison = -1;\n        } else if (a.verifyDate < b.verifyDate) {\n            comparison = 1;\n        }\n        return comparison;\n    }\n\n    const handleTransdatevalue = (datevalueS) => {\n        setDatevalue(datevalueS)\n        setZoomDefault(5);\n    }\n    const handleTransPosotion = ([PositionValuelat,PositionValuelng]) => {\n        setPositionP([PositionValuelat,PositionValuelng]);\n    }\n    const handleTranszoomDefault = (ZoomValue) => {\n        setZoomDefault(ZoomValue);\n    }\n    \n    \n    useEffect(() => {\n        fetch(\"https://maps.vnpost.vn/apps/covid19/api/patientapi/list\")\n            .then(res => res.json())\n            .then(\n                (result) => {\n                    setPatients(result.data);\n                },\n                // Note: it's important to handle errors here\n                // instead of a catch() block so that we don't swallow\n                // exceptions from actual bugs in components.\n                (error) => {\n                    // setIsLoaded(true);\n                    // setError(error);\n                }\n            )\n    }, [])\n\n    const listItems = [].concat(patients)\n                        .sort(compare)\n                        .map((d,i) => {\n                            if (Date.parse(d.verifyDate) <= Date.parse(datevalue))\n                                    return <ListItem selected={selectedIndex === (d.name + d.address)} button onClick={(event) => {handleclickList(d);handleclickMoveMap(d);handleListItemClick(event, (d.name + d.address))}} > <li>{d.name} - {d.address}</li></ListItem>\n                                });            \n    return <div><Map center={positionP} zoom={zoomDefault}>\n            <TileLayer\n                attribution='&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n                url=\"https://{s}.tile.osm.org/{z}/{x}/{y}.png   \"\n            />\n    {patients\n        .sort(compare)\n        .map((patient,i) => {\n            if (Date.parse(patient.verifyDate) <= Date.parse(datevalue))\n            return (\n            <Marker position={[patient.lat, patient.lng]} onClick={(event) => {handleclickList(patient);handleListItemClick(event, (patient.name + patient.address), i)}}>\n                <Popup>\n                    <ul>\n                        <li>Name: {patient.name}</li>\n                        <li>Address: {patient.address}</li>\n                        <li>Note: {patient.note}</li>\n                        <li>Verify date: {patient.verifyDate}</li>\n                    </ul>\n                </Popup>\n            </Marker>)\n            })\n    }\n    </Map>\n    <div id=\"list\">\n        <Seekbar handleTransdatevalue={handleTransdatevalue} handleTransPosotion={handleTransPosotion} handleTranszoomDefault={handleTranszoomDefault}></Seekbar>\n        <br/>\n        Danh sách người nhiễm nCovid - 19:\n        <ul>\n            {listItems}\n        </ul>\n    </div></div>;\n};\n\n\nexport default CovidMap;\n"]},"metadata":{},"sourceType":"module"}